#!/bin/bash

clr_reset="\e[0m"
clr_info="\e[1;32m" # INFO
clr_warn="\e[1;33m" # WARN
clr_err="\e[1;31m"  # ERROR
clr_verb="\e[1;36m"
verbose=0

function log_message()
{
  local log_level="$1"
  local log_color="$2"
  local log_text="$3"
  echo -e "[${log_color}${log_level}${clr_reset}] ${log_text}"
}

function log_verbose()
{
  local message="$1"
  if (( verbose ))
  then
    log_message "V" "$clr_verb" "$message"
  fi
}

function log_info()
{
  local message="$1"
  log_message "I" "$clr_info" "$message"
}

function log_wrn()
{
  local message="$1"
  log_message "W" "$clr_warn" "$message"
}

function log_err()
{
  local message="$1"
  log_message "E" "$clr_err" "$message"
}

function wrong_opt()
{
  local message="$1"
  log_err "${message}"
  help
  exit 1
}

function log_cry()
{
  local message="$1"
  log_err "${message}"
  exit 1
}

function help()
{
  echo "$help_text"
  exit 0
}

function ask_confirmation()
{
  local prompt_message=$1
  local user_input

  while true
  do
    echo -ne "[${clr_warn}?${clr_reset}] "
    read -r -p "$prompt_message (y/n): " user_input
    case "$user_input" in
      [Yy]) return 0 ;;
      [Nn]) exit 1   ;;
          *) log_wrn "Нужно ввести 'y' или 'n'. Попробуйте ещё раз." ;;
    esac
  done
}
